<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ IELTS Progress Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #334155 100%);
            min-height: 100vh;
            color: #F1F5F9;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .main-title {
            font-size: 52px;
            font-weight: 800;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 50%, #06B6D4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }
        
        .countdown-container {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 25px 50px rgba(59, 130, 246, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .countdown-days {
            font-size: 72px;
            font-weight: 900;
            color: #FFFFFF;
            line-height: 1;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .countdown-label {
            color: #E0E7FF;
            font-size: 18px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }
        
        .countdown-date {
            color: #C7D2FE;
            font-size: 16px;
            margin-top: 12px;
            opacity: 0.9;
        }
        
        .quote-container {
            background: linear-gradient(135deg, #0EA5E9 0%, #0284C7 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 25px 0 50px 0;
            position: relative;
            box-shadow: 0 20px 40px rgba(14, 165, 233, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .quote-text {
            font-size: 20px;
            font-weight: 500;
            color: #FFFFFF;
            text-align: center;
            line-height: 1.6;
        }
        
        .section {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(51, 65, 85, 0.8) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 35px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 25px;
            color: #F1F5F9;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            color: #CBD5E1;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .form-group input, .form-group select {
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 12px 16px;
            color: #F1F5F9;
            font-size: 15px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #3B82F6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1), 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        .btn {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 14px 28px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(59, 130, 246, 0.25);
            margin: 5px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(59, 130, 246, 0.4);
            background: linear-gradient(135deg, #2563EB 0%, #1E40AF 100%);
        }
        
        .btn-export {
            background: linear-gradient(135deg, #0EA5E9 0%, #0284C7 100%);
            margin-left: 15px;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
            margin-left: 15px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(51, 65, 85, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(59, 130, 246, 0.3);
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #3B82F6 0%, #06B6D4 100%);
        }
        
        .metric-title {
            color: #CBD5E1;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .metric-value {
            color: #F1F5F9;
            font-size: 42px;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 12px;
        }
        
        .metric-subtitle {
            color: #94A3B8;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .chart-wrapper {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.9) 0%, rgba(51, 65, 85, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: 350px;
        }
        
        .chart-title {
            color: #F1F5F9;
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .chart-canvas {
            height: 280px !important;
        }
        
        .test-entries {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 25px;
        }
        
        .test-entry {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(51, 65, 85, 0.6) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 18px;
            margin: 12px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .test-entry:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(30, 41, 59, 0.8) 100%);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .test-info {
            color: #F1F5F9;
            font-weight: 600;
        }
        
        .test-meta {
            color: #94A3B8;
            font-size: 13px;
            margin-top: 4px;
        }
        
        .delete-btn {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .delete-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
        }
        
        .status-excellent { color: #10B981; }
        .status-good { color: #3B82F6; }
        .status-average { color: #F59E0B; }
        .status-needs-work { color: #EF4444; }
        
        .save-status {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #10B981 0%, #059669 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }
        
        .save-status.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Target Score Indicators */
        .target-indicator {
            position: absolute;
            right: 20px;
            top: 20px;
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .main-title { font-size: 36px; }
            .countdown-days { font-size: 48px; }
            .form-grid { grid-template-columns: 1fr; }
            .charts-container { grid-template-columns: 1fr; }
            .metrics-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="save-status" id="saveStatus">üíæ Data Saved Successfully</div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="main-title">üéØ IELTS Progress Tracker</h1>
            
            <div class="countdown-container">
                <div class="countdown-days" id="daysLeft">0</div>
                <div class="countdown-label">Days Until IELTS</div>
                <div class="countdown-date" id="examDate">Set your exam date below</div>
            </div>
            
            <div class="quote-container">
                <div class="quote-text" id="dailyQuote">Your journey to IELTS success starts here!</div>
            </div>
        </div>
        
        <!-- Add Score Form -->
        <div class="section">
            <h2 class="section-title">üìù Add New Test Score</h2>
            <form id="scoreForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="testType">Test Type</label>
                        <select id="testType" required>
                            <option value="listening">üéß Listening</option>
                            <option value="reading">üìñ Reading</option>
                            <option value="writing">‚úçÔ∏è Writing</option>
                            <option value="speaking">üó£Ô∏è Speaking</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="score">Score</label>
                        <select id="score" required>
                            <option value="5.0">5.0 ‚≠ê</option>
                            <option value="5.5">5.5 ‚≠ê</option>
                            <option value="6.0" selected>6.0 ‚≠ê‚≠ê</option>
                            <option value="6.5">6.5 ‚≠ê‚≠ê</option>
                            <option value="7.0">7.0 ‚≠ê‚≠ê‚≠ê</option>
                            <option value="7.5">7.5 ‚≠ê‚≠ê‚≠ê</option>
                            <option value="8.0">8.0 ‚≠ê‚≠ê‚≠ê‚≠ê</option>
                            <option value="8.5">8.5 ‚≠ê‚≠ê‚≠ê‚≠ê</option>
                            <option value="9.0">9.0 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="testDate">Test Date</label>
                        <input type="date" id="testDate" required>
                    </div>
                    <div class="form-group">
                        <label for="testHour">Test Hour</label>
                        <input type="time" id="testHour" required value="14:00">
                    </div>
                </div>
                <button type="submit" class="btn">‚ûï Add Test Score</button>
            </form>
        </div>
        
        <!-- Current Performance -->
        <div class="section">
            <h2 class="section-title">üìä Current Performance</h2>
            <div class="metrics-grid" id="metricsGrid">
                <!-- Metrics will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Progress Analysis -->
        <div class="section">
            <h2 class="section-title">üìà Progress Analysis</h2>
            <div class="charts-container">
                <div class="chart-wrapper">
                    <div class="chart-title">üéß Listening Progress</div>
                    <canvas id="listeningChart" class="chart-canvas"></canvas>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">üìñ Reading Progress</div>
                    <canvas id="readingChart" class="chart-canvas"></canvas>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">‚úçÔ∏è Writing Progress</div>
                    <canvas id="writingChart" class="chart-canvas"></canvas>
                </div>
                <div class="chart-wrapper">
                    <div class="chart-title">üó£Ô∏è Speaking Progress</div>
                    <canvas id="speakingChart" class="chart-canvas"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Recent Test Entries -->
        <div class="section">
            <h2 class="section-title">üìã Recent Test Entries</h2>
            <div class="test-entries" id="testEntries">
                <!-- Test entries will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Exam Settings - Moved to bottom -->
        <div class="section">
            <h2 class="section-title">üéØ Exam Settings</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="examDateInput">IELTS Exam Date</label>
                    <input type="date" id="examDateInput">
                </div>
            </div>
            <div style="margin-top: 20px;">
                <button type="button" class="btn" onclick="updateExamDate()">Update Exam Date</button>
                <button type="button" class="btn btn-export" onclick="exportData()">üì§ Export Data</button>
                <button type="button" class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
            </div>
        </div>
    </div>

    <script>
        // Target scores for each section
        const TARGET_SCORES = {
            listening: 7.5,
            reading: 7.0,
            writing: 6.5,
            speaking: 7.0
        };

        let appData = {
            scores: {
                listening: [],
                reading: [],
                writing: [],
                speaking: []
            },
            targetDate: new Date('2025-11-01').toISOString().split('T')[0]
        };

        const quotes = [
            "Success is the sum of small efforts, repeated day in and day out.",
            "Every expert was once a beginner. Keep practicing!",
            "Your limitation‚Äîit's only your imagination. Break through!",
            "Push yourself, because no one else is going to do it for you.",
            "Great things never come from comfort zones. Step up!",
            "Dream it. Wish it. Do it. Achieve your IELTS goals!",
            "The harder you work for something, the greater you'll feel when you achieve it.",
            "Success doesn't just find you. You have to go out and get it.",
            "Don't stop when you're tired. Stop when you're done!",
            "Wake up with determination. Go to bed with satisfaction."
        ];

        let charts = {};

        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            initializeForm();
            updateUI();
            setDailyQuote();
            initializeCharts();
        });

        function saveData() {
            try {
                appData = JSON.parse(JSON.stringify(appData));
                showSaveStatus();
            } catch (error) {
                console.error('Error saving data:', error);
            }
        }

        function loadData() {
            // In a real app, this would load from storage
        }

        function showSaveStatus() {
            const status = document.getElementById('saveStatus');
            status.classList.add('show');
            setTimeout(() => status.classList.remove('show'), 3000);
        }

        function initializeForm() {
            const today = new Date();
            document.getElementById('testDate').value = today.toISOString().split('T')[0];
            document.getElementById('examDateInput').value = appData.targetDate;
            // Set default time to current time if not already set
            if (!document.getElementById('testHour').value) {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                document.getElementById('testHour').value = `${hours}:${minutes}`;
            }
        }

        function setDailyQuote() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const quote = quotes[dayOfYear % quotes.length];
            document.getElementById('dailyQuote').textContent = quote;
        }

        document.getElementById('scoreForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const testType = document.getElementById('testType').value;
            const score = parseFloat(document.getElementById('score').value);
            const testDate = document.getElementById('testDate').value;
            const testHour = document.getElementById('testHour').value;
            
            const testId = `${testDate}_${testHour}_${appData.scores[testType].length}`;
            
            appData.scores[testType].push({
                id: testId,
                date: testDate,
                time: testHour,
                score: score,
                datetime: `${testDate} ${testHour}`
            });
            
            appData.scores[testType].sort((a, b) => new Date(a.datetime) - new Date(b.datetime));
            
            saveData();
            updateUI();
            updateCharts();
            
            this.reset();
            initializeForm();
            
            alert(`‚úÖ Added ${testType} score: ${score}`);
        });

        function updateExamDate() {
            const newDate = document.getElementById('examDateInput').value;
            if (newDate) {
                appData.targetDate = newDate;
                saveData();
                updateUI();
                alert('üéØ Exam date updated successfully!');
            }
        }

        function calculateDaysLeft() {
            const today = new Date();
            const examDate = new Date(appData.targetDate);
            const diffTime = examDate - today;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return Math.max(0, diffDays);
        }

        function getScoreStats(testType) {
            const scores = appData.scores[testType];
            if (scores.length === 0) return { latest: 0, average: 0, best: 0, count: 0 };
            
            const scoreValues = scores.map(s => s.score);
            return {
                latest: scoreValues[scoreValues.length - 1],
                average: Math.round((scoreValues.reduce((a, b) => a + b, 0) / scoreValues.length) * 10) / 10,
                best: Math.max(...scoreValues),
                count: scores.length
            };
        }

        function getScoreStatus(score) {
            if (score >= 8.0) return { class: "status-excellent", text: "üî• Excellent" };
            if (score >= 7.0) return { class: "status-good", text: "üéØ Target Reached" };
            if (score >= 6.0) return { class: "status-average", text: "üìà Good Progress" };
            if (score > 0) return { class: "status-needs-work", text: "üí™ Keep Practicing" };
            return { class: "status-needs-work", text: "üìö Start Testing" };
        }

        function updateUI() {
            const daysLeft = calculateDaysLeft();
            document.getElementById('daysLeft').textContent = daysLeft;
            
            const examDate = new Date(appData.targetDate);
            document.getElementById('examDate').textContent = examDate.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });

            updateMetrics();
            updateTestEntries();
        }

        function updateMetrics() {
            const testTypes = ['listening', 'reading', 'writing', 'speaking'];
            const testIcons = ['üéß', 'üìñ', '‚úçÔ∏è', 'üó£Ô∏è'];
            
            let html = '';
            
            testTypes.forEach((test, index) => {
                const stats = getScoreStats(test);
                const status = getScoreStatus(stats.latest);
                const target = TARGET_SCORES[test];
                const isTargetReached = stats.latest >= target;
                
                html += `
                <div class="metric-card">
                    <div class="target-indicator" style="background: ${isTargetReached ? 'linear-gradient(135deg, #10B981 0%, #059669 100%)' : 'linear-gradient(135deg, #EF4444 0%, #DC2626 100%)'}">
                        Target: ${target}
                    </div>
                    <div class="metric-title">${testIcons[index]} ${test.charAt(0).toUpperCase() + test.slice(1)}</div>
                    <div class="metric-value">${stats.latest > 0 ? stats.latest : '‚Äî'}</div>
                    <div class="metric-subtitle">
                        Best: ${stats.best > 0 ? stats.best : '‚Äî'} ‚Ä¢ Average: ${stats.average > 0 ? stats.average : '‚Äî'}<br>
                        <span class="${status.class}">${status.text}</span> ‚Ä¢ ${stats.count} tests
                    </div>
                </div>
                `;
            });
            
            document.getElementById('metricsGrid').innerHTML = html;
        }

        function updateTestEntries() {
            let html = '';
            const testTypes = ['listening', 'reading', 'writing', 'speaking'];
            const testIcons = ['üéß', 'üìñ', '‚úçÔ∏è', 'üó£Ô∏è'];
            
            testTypes.forEach((test, index) => {
                const scores = appData.scores[test];
                const recentTests = scores.slice(-3).reverse();
                
                if (recentTests.length > 0) {
                    html += `<h3 style="color: #F1F5F9; margin: 25px 0 15px 0; font-size: 18px;">${testIcons[index]} ${test.charAt(0).toUpperCase() + test.slice(1)}</h3>`;
                    
                    recentTests.forEach(entry => {
                        html += `
                        <div class="test-entry">
                            <div>
                                <div class="test-info">Score: ${entry.score} ‚Ä¢ ${entry.date}</div>
                                <div class="test-meta">Time: ${entry.time}</div>
                            </div>
                            <button class="delete-btn" onclick="removeScore('${test}', '${entry.id}')">üóëÔ∏è</button>
                        </div>
                        `;
                    });
                }
            });
            
            if (html === '') {
                html = '<p style="color: #94A3B8; text-align: center; padding: 60px; font-size: 18px;">üìù No test scores yet. Add your first score above!</p>';
            }
            
            document.getElementById('testEntries').innerHTML = html;
        }

        function removeScore(testType, testId) {
            if (confirm('Are you sure you want to delete this test entry?')) {
                appData.scores[testType] = appData.scores[testType].filter(item => item.id !== testId);
                saveData();
                updateUI();
                updateCharts();
            }
        }

        function initializeCharts() {
            const testTypes = ['listening', 'reading', 'writing', 'speaking'];
            
            testTypes.forEach(testType => {
                const ctx = document.getElementById(`${testType}Chart`).getContext('2d');
                const target = TARGET_SCORES[testType];
                
                charts[testType] = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Your Score',
                            data: [],
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#3B82F6',
                            pointBorderColor: '#FFFFFF',
                            pointBorderWidth: 3,
                            pointRadius: 6
                        }, {
                            label: 'Target Score',
                            data: [],
                            borderColor: '#EF4444',
                            backgroundColor: 'transparent',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                labels: {
                                    color: '#CBD5E1',
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 4.5,
                                max: 9,
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.2)'
                                },
                                ticks: {
                                    color: '#94A3B8',
                                    font: {
                                        size: 11
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.2)'
                                },
                                ticks: {
                                    color: '#94A3B8',
                                    font: {
                                        size: 11
                                    }
                                }
                            }
                        }
                    }
                });
            });
            
            updateCharts();
        }

        function updateCharts() {
            const testTypes = ['listening', 'reading', 'writing', 'speaking'];
            
            testTypes.forEach(testType => {
                const scores = appData.scores[testType];
                const chart = charts[testType];
                const target = TARGET_SCORES[testType];
                
                if (scores.length > 0) {
                    const labels = scores.map((_, index) => `Test ${index + 1}`);
                    const scoreData = scores.map(s => s.score);
                    const targetData = new Array(scores.length).fill(target);
                    
                    chart.data.labels = labels;
                    chart.data.datasets[0].data = scoreData;
                    chart.data.datasets[1].data = targetData;
                } else {
                    chart.data.labels = [];
                    chart.data.datasets[0].data = [];
                    chart.data.datasets[1].data = [];
                }
                
                chart.update();
            });
        }

        function exportData() {
            const dataToExport = {
                ...appData,
                exportedAt: new Date().toISOString(),
                targetScores: TARGET_SCORES
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `ielts_progress_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('üì§ Data exported successfully!');
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è Are you sure you want to delete ALL your progress data? This cannot be undone!')) {
                if (confirm('üóëÔ∏è This will permanently delete all your test scores. Click OK to confirm.')) {
                    appData = {
                        scores: {
                            listening: [],
                            reading: [],
                            writing: [],
                            speaking: []
                        },
                        targetDate: new Date('2025-11-01').toISOString().split('T')[0]
                    };
                    
                    updateUI();
                    updateCharts();
                    initializeForm();
                    alert('üóëÔ∏è All data cleared successfully!');
                }
            }
        }
    </script>
</body>
</html>